{"version":3,"file":"DefaultDiagramState.js","sourceRoot":"","sources":["../../src/states/DefaultDiagramState.ts"],"names":[],"mappings":"AACA,OAAO,EACN,cAAc,EACd,KAAK,EACL,MAAM,EACN,SAAS,EAET,eAAe,EACf,MAAM,iCAAiC,CAAC;AACzC,OAAO,EAAE,SAAS,EAAE,MAAM,4BAA4B,CAAC;AACvD,OAAO,EAAE,gBAAgB,EAAE,MAAM,oBAAoB,CAAC;AAEtD,OAAO,EAAE,qBAAqB,EAAE,MAAM,yBAAyB,CAAC;AAEhE,MAAM,OAAO,mBAAoB,SAAQ,KAAoB;IAK5D;QACC,KAAK,CAAC;YACL,IAAI,EAAE,kBAAkB;SACxB,CAAC,CAAC;QACH,IAAI,CAAC,WAAW,GAAG,CAAC,IAAI,cAAc,EAAE,CAAC,CAAC;QAC1C,IAAI,CAAC,UAAU,GAAG,IAAI,eAAe,EAAE,CAAC;QACxC,IAAI,CAAC,WAAW,GAAG,IAAI,gBAAgB,EAAE,CAAC;QAC1C,IAAI,CAAC,SAAS,GAAG,IAAI,qBAAqB,EAAE,CAAC;QAE7C,gCAAgC;QAChC,IAAI,CAAC,cAAc,CAClB,IAAI,MAAM,CAAC;YACV,IAAI,EAAE,SAAS,CAAC,UAAU;YAC1B,IAAI,EAAE,CAAC,KAA8B,EAAE,EAAE;gBACxC,MAAM,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,iBAAiB,EAAE,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC;gBAExE,qEAAqE;gBACrE,IAAI,CAAC,OAAO,EAAE,CAAC;oBACd,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;gBAClD,CAAC;gBACD,+BAA+B;qBAC1B,IAAI,OAAO,YAAY,SAAS,EAAE,CAAC;oBACvC,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC;gBACnD,CAAC;gBACD,+CAA+C;qBAC1C,CAAC;oBACL,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;gBACjD,CAAC;YACF,CAAC;SACD,CAAC,CACF,CAAC;QAEF,yBAAyB;QACzB,IAAI,CAAC,cAAc,CAClB,IAAI,MAAM,CAAC;YACV,IAAI,EAAE,SAAS,CAAC,WAAW;YAC3B,IAAI,EAAE,CAAC,KAA8B,EAAE,EAAE;gBACxC,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;YAClD,CAAC;SACD,CAAC,CACF,CAAC;IACH,CAAC;CACD","sourcesContent":["import { MouseEvent, TouchEvent } from 'react';\r\nimport {\r\n\tSelectingState,\r\n\tState,\r\n\tAction,\r\n\tInputType,\r\n\tActionEvent,\r\n\tDragCanvasState\r\n} from '@projectstorm/react-canvas-core';\r\nimport { PortModel } from '../entities/port/PortModel';\r\nimport { DragNewLinkState } from './DragNewLinkState';\r\nimport { DiagramEngine } from '../DiagramEngine';\r\nimport { DragDiagramItemsState } from './DragDiagramItemsState';\r\n\r\nexport class DefaultDiagramState extends State<DiagramEngine> {\r\n\tdragCanvas: DragCanvasState;\r\n\tdragNewLink: DragNewLinkState;\r\n\tdragItems: DragDiagramItemsState;\r\n\r\n\tconstructor() {\r\n\t\tsuper({\r\n\t\t\tname: 'default-diagrams'\r\n\t\t});\r\n\t\tthis.childStates = [new SelectingState()];\r\n\t\tthis.dragCanvas = new DragCanvasState();\r\n\t\tthis.dragNewLink = new DragNewLinkState();\r\n\t\tthis.dragItems = new DragDiagramItemsState();\r\n\r\n\t\t// determine what was clicked on\r\n\t\tthis.registerAction(\r\n\t\t\tnew Action({\r\n\t\t\t\ttype: InputType.MOUSE_DOWN,\r\n\t\t\t\tfire: (event: ActionEvent<MouseEvent>) => {\r\n\t\t\t\t\tconst element = this.engine.getActionEventBus().getModelForEvent(event);\r\n\r\n\t\t\t\t\t// the canvas was clicked on, transition to the dragging canvas state\r\n\t\t\t\t\tif (!element) {\r\n\t\t\t\t\t\tthis.transitionWithEvent(this.dragCanvas, event);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// initiate dragging a new link\r\n\t\t\t\t\telse if (element instanceof PortModel) {\r\n\t\t\t\t\t\tthis.transitionWithEvent(this.dragNewLink, event);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// move the items (and potentially link points)\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthis.transitionWithEvent(this.dragItems, event);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\r\n\t\t// touch drags the canvas\r\n\t\tthis.registerAction(\r\n\t\t\tnew Action({\r\n\t\t\t\ttype: InputType.TOUCH_START,\r\n\t\t\t\tfire: (event: ActionEvent<TouchEvent>) => {\r\n\t\t\t\t\tthis.transitionWithEvent(this.dragCanvas, event);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n}\r\n"]}